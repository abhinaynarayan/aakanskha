<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>AAKANSHA</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="" name="keywords">
  <meta content="" name="description">

  <!-- Favicons -->
  <link href="img/logo.png" rel="icon">
  <link href="img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Raleway:300,400,500,700,800" rel="stylesheet">

  <!-- Bootstrap CSS File -->
  <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Libraries CSS Files -->
  <link href="lib/font-awesome/css/font-awesome.min.css" rel="stylesheet">
  <link href="lib/animate/animate.min.css" rel="stylesheet">
  <link href="lib/venobox/venobox.css" rel="stylesheet">
  <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

  <!-- Main Stylesheet File -->
  <link href="css/style.css" rel="stylesheet">
  <style>
    .volunteer-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 1rem;
        font-size: 1rem;
    }
  
    .volunteer-table th, .volunteer-table td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
    }
  
    .volunteer-table th {
        background-color: #4CAF50;
        color: white;
    }
  
    .volunteer-table tr:nth-child(even) {
        background-color: #f2f2f2; /* Alternate row coloring */
    }
  
    .volunteer-table tr:hover {
        background-color: #ddd; /* Highlight on hover */
    }
  
    .volunteer-table th, .volunteer-table td {
        text-align: left;
        padding: 12px 15px;
    }
  
    /* Responsive Design */
    @media screen and (max-width: 600px) {
        .volunteer-table {
            font-size: 0.9rem;
        }
  
        .volunteer-table th, .volunteer-table td {
            padding: 10px;
        }
    }
  </style>
  
</head>

<body>

  <!--==========================
    Header
  ============================-->
  <header id="header" class="header-fixed">
    <div class="container">

      <div id="logo" class="pull-left">
        <!-- Uncomment below if you prefer to use a text logo -->
        <!-- <h1><a href="#main">C<span>o</span>nf</a></h1>-->
        <a href="index.html#intro" class="scrollto"><img src="img/logo1.jpeg" alt="" title=""></a>
      </div>

      <nav id="nav-menu-container">
        <ul class="nav-menu">
          <li class="menu-active"><a href="index.html#intro">Home</a></li>
          <li><a href="index.html#about">About</a></li>
          <li><a href="index.html#speakers">Event</a></li>
          <li><a href="index.html#schedule">Schedule</a></li>
          <li><a href="index.html#venue">Venue</a></li>
          <li><a href="team.html">Team </a></li>
          <li><a href="index.html#gallery">Gallery</a></li>
          <li><a href="index.html#sponsors">Sponsors</a></li>
          <li><a href="index.html#contact">Contact</a></li>
          
        </ul>
      </nav><!-- #nav-menu-container -->
    </div>
  </header><!-- #header -->

  <main id="main" class="main-page">

    <!--==========================
      Speaker Details Section
    ============================-->
    <div id="event-sections-container">
      <h1>Event Details</h1>
    </div>
    
  </main>


  <!--==========================
    Footer
  ============================-->
  <footer id="footer" >
    <div class="footer-top" >
      <div class="container">
        <div class="row">

          
         


          <div class="col-lg-12 col-md-6 footer-contact">
            

            <div class="social-links">
              <a href="https://x.com/iscaakanksha?s=11
              " class="twitter"><i class="fa fa-twitter"></i></a>
              <a href="#" class="facebook"><i class="fa fa-facebook"></i></a>
              <a href="https://www.instagram.com/iscaakanksha/profilecard/?igsh=MTk4cGlnN2xjODFxdg==
              " class="instagram"><i class="fa fa-instagram"></i></a>
              <a href="https://youtube.com/@iscaakanksha?si=EXxKe5n4rDDH3neF " class="google-plus"><i class="fa fa-youtube"></i></a>
              <a href="#" class="linkedin"><i class="fa fa-linkedin"></i></a>
            </div>

          </div>

        </div>
      </div>
    </div>

    <div class="container">
      <div class="copyright">
        &copy; Copyright <strong>AAKANKSHA</strong>. All Rights Reserved
      </div>
      <div class="credits">
        
        Designed by <a href="https://bootstrapmade.com/">MSC CSA</a>
      </div>
    </div>
  </footer><!-- #footer -->

  <a href="#" class="back-to-top"><i class="fa fa-angle-up"></i></a>

  <!-- JavaScript Libraries -->
  <script src="lib/jquery/jquery.min.js"></script>
  <script src="lib/jquery/jquery-migrate.min.js"></script>
  <script src="lib/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="lib/easing/easing.min.js"></script>
  <script src="lib/superfish/hoverIntent.js"></script>
  <script src="lib/superfish/superfish.min.js"></script>
  <script src="lib/wow/wow.min.js"></script>
  <script src="lib/venobox/venobox.min.js"></script>
  <script src="lib/owlcarousel/owl.carousel.min.js"></script>

  <!-- Contact Form JavaScript File -->
  <script src="contactform/contactform.js"></script>

  <!-- Template Main Javascript File -->
  <script src="js/main.js"></script>
  <script>
    // Disable right-click on the page
    document.addEventListener('contextmenu', (e) => e.preventDefault());
</script>
<script>
  // Wait for the DOM to be fully loaded
  document.addEventListener('DOMContentLoaded', function() {
    // Get the query parameter 'event' from the URL
    const urlParams = new URLSearchParams(window.location.search);
    const eventName = urlParams.get('event');
    
    // Hide all sections by default
    const sections = document.querySelectorAll('section');
    sections.forEach(section => {
      section.style.display = 'none';
    });
    
    // Show the relevant section if it exists
    if (eventName) {
      const targetSection = document.getElementById(eventName);
      if (targetSection) {
        targetSection.style.display = 'block';
      }
    }
  });
</script>
<script>
  // Define the API key and spreadsheet details
  const API_KEY = "AIzaSyBtR77cP_cv03h6DtKdntwSrxv5SjNWpeA"; // Replace with your actual API key
  const SPREADSHEET_ID = "1vHQl6V2ex5dlX8bSxBwDrZXO6VKClo-MnOE8w0X_yJA";
  const RANGE = "EventDetails"; // Replace with the actual sheet name or range

  // Function to get category from the URL
  function getCategoryFromURL() {
    const params = new URLSearchParams(window.location.search);
    return params.get("category"); // Extract "category" from "?category=<value>"
  }

  // Fetch data from the Google Sheets API
  async function fetchSheetData() {
    const url = `https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${RANGE}?key=${API_KEY}`;
    try {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      const data = await response.json();
      return parseSheetData(data);
    } catch (error) {
      showContactDetails();
      throw error;
    }
  }

  // Parse Google Sheets API data into JSON
  function parseSheetData(apiResponse) {
    const headers = apiResponse.values[0];
    const rows = apiResponse.values.slice(1);
    return rows.map(row =>
      row.reduce((acc, value, index) => {
        acc[headers[index].trim()] = value.trim();
        return acc;
      }, {})
    );
  }

  // Format multi-line values by splitting them and adding <br> for line breaks
  function formatMultiLineValue(value) {
    if (value && value.trim()) {
      return value.split(/\r?\n/).map(line => line.trim()).join("<br>");
    }
    return "N/A";
  }

  // Generate a dynamic section for an event
  function generateEventSection(event) {
    const eventImage = getEventImageURL(event["Event"]);
    const teacherNames = formatMultiLineValue(event["Teacher"]);
    const volunteerNames = formatMultiLineValue(event["Volunteer"]);
    const contactInfo = formatMultiLineValue(event["Contact"]);

    return `
      <section id="${event["Event"]}" class="wow fadeIn">
        <div class="container">
          <div class="section-header">
            <h2>${event["Event"]}</h2>
          </div>
          <div class="row">
            <div class="col-md-6">
              <img src="${eventImage}" alt="${event["Event"]} Image" class="img-fluid">
            </div>
            <div class="col-md-6">
              <table class="table table-striped">
                <tbody>
                  <tr>
                    <th>Links</th>
                    <td>
                      ${event["glink"] ? `<a href="${event["glink"]}" target="_blank" title="Register">Click here for Register || </a>` : ""}
                      ${event["rlink"] ? `<a href="${event["rlink"]}" target="_blank" title="Rules"> Rules of Event</a>` : ""}
                      ${!event["glink"] && !event["rlink"] ? "N/A" : ""}
                    </td>
                  </tr>
                  <tr>
                    <th>Date & Time</th>
                    <td>
                        ${event["Dateofevent"] || "N/A"} ${event["Timing"] ? `at ${event["Timing"]}` : ""}
                        </td>
                      </tr>
                  <tr>
                    <tr><th>Venue</th><td>${event["Venue"] || "N/A"}</td></tr>
                    <th>Core Volunteer</th><td>${volunteerNames}</td></tr>
                  <tr><th>Teacher(s)</th><td>${teacherNames}</td></tr>
                  <tr>
                    <th>Contact</th>
                    <td>
                      ${contactInfo ? `<a href="tel:${contactInfo}" title="Call"><i class="fa fa-phone"></i> || </a>` : ""}
                      ${event["Email"] ? `<a href="mailto:${event["Email"]}" title="Email"><i class="fa fa-envelope"></i> || </a>` : ""}
                      ${contactInfo ? `<a href="https://wa.me/${contactInfo}" title="WhatsApp" target="_blank"><i class="fa fa-whatsapp"></i></a>` : ""}
                      ${!contactInfo && !event["Email"] ? "N/A" : ""}
                    </td>
                  </tr>
                  
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>
    `;
  }

  // Generate a dynamic image URL
  function getEventImageURL(eventName) {
    const basePath = "img/speakers/";
    const extensions = [".png", ".jpg", ".jpeg"];
    for (let ext of extensions) {
      const imagePath = `${basePath}${eventName}${ext}`;
      if (imageExists(imagePath)) {
        return imagePath;
      }
    }
    return `${basePath}default.jpg`;
  }

  // Helper function to check if the image exists
  async function imageExists(url) {
    try {
      const response = await fetch(url, { method: "HEAD" });
      return response.ok;
    } catch {
      return false;
    }
  }

  // Render sections dynamically based on the category
  async function renderSections() {
    const category = getCategoryFromURL();
    try {
      const data = await fetchSheetData();
      const container = document.getElementById("event-sections-container");
      container.innerHTML = ""; // Clear previous content

      const filteredEvents = data.filter(event => event["Categories"] === category);
      if (filteredEvents.length === 0) {
        container.innerHTML = `<p>No events found for category: ${category}</p>`;
        return;
      }

      for (const event of filteredEvents) {
        const sectionHTML = generateEventSection(event);
        container.innerHTML += sectionHTML;
      }
    } catch (error) {
      console.error('Error fetching or rendering data:', error);
    }
  }

  // Show contact details in case of an error
  function showContactDetails() {
    const container = document.getElementById("event-sections-container");
    container.innerHTML = `
      <section id="contact-details" class="wow fadeIn">
        <div class="container">
          <div class="section-header">
            <h2>Contact Us</h2>
          </div>
          <div class="row">
            <div class="col-md-12">
              <p><b>If you don't see the event details,please wait for 2 min and retry <br>
                OR, can try to register from our schedule section : <a href="index.html#schedule">Click here</a><br>
                
                
              Else you can contact us on.<b></p>
              
              <p>Phone: <a href="tel:+919650546261">9650546261</a></p>
              <p>Email: <a href="mailto:bipulkrsng@bhu.ac.in">bipulkrsng@bhu.ac.in</a></p>
            </div>
          </div>
        </div>
      </section>
    `;
  }

  // Initialize rendering
  renderSections();
</script>




</body>

</html>
